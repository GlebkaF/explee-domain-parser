# Slice 4: –ü–∞—Ä—Å–∏–Ω–≥ HTML –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `rawHtmlData` –≤ –º–æ–¥–µ–ª—å Domain (—Ç–∏–ø: Text)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `20251115142405_add_raw_html_data`

### 2. –ü–∞—Ä—Å–∏–Ω–≥ HTML
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `fetchDomainHtml()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - HTTPS/HTTP fallback
  - User-Agent –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ—Å—Ç—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
  - –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
  - –†–µ–¥–∏—Ä–µ–∫—Ç—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `processDomain()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è HTML

### 3. UI/UX
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–ø–æ–π–ª–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è rawHtmlData —É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "‚ñ∂ –ü–æ–∫–∞–∑–∞—Ç—å HTML / ‚ñº –°–∫—Ä—ã—Ç—å HTML" –≤ —Å—Ç–æ–ª–±—Ü–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ HTML –≤ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–æ–º –±–ª–æ–∫–µ (max-height: 96)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è HTML –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ HTML

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
prisma/schema.prisma - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ rawHtmlData
app/api/cron/process-domains/route.ts - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ä—Å–∏–Ω–≥ HTML
app/domains/DomainsTable.tsx - –¥–æ–±–∞–≤–ª–µ–Ω —Å–ø–æ–π–ª–µ—Ä
app/domains/page.tsx - –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Domain
```

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üöÄ Run Agent" –Ω–∞ –¥–æ–º–µ–Ω–µ
2. –î–æ–º–µ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `queued`
3. Cron –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–±–∏—Ä–∞–µ—Ç –¥–æ–º–µ–Ω –∏ —Å—Ç–∞–≤–∏—Ç —Å—Ç–∞—Ç—É—Å `running`
4. –§—É–Ω–∫—Ü–∏—è `fetchDomainHtml()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç HTML:
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ—Ç HTTPS
   - –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –ø—Ä–æ–±—É–µ—Ç HTTP
   - –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –¥–æ–º–µ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `error`
5. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ HTML —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `rawHtmlData` –∏ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `completed`
6. –£ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "‚ñ∂ –ü–æ–∫–∞–∑–∞—Ç—å HTML"
7. –ü—Ä–∏ –∫–ª–∏–∫–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–ø–æ–π–ª–µ—Ä —Å HTML –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTML –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

## üîç –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ HTML
const htmlContent = await fetchDomainHtml('example.com');

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
await prisma.domain.update({
  where: { id: domainId },
  data: { 
    status: 'completed',
    rawHtmlData: htmlContent,
  },
});
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: Slice 5

–°–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π—Å –±—É–¥–µ—Ç –≤–∫–ª—é—á–∞—Ç—å:
- LLM –æ–±—Ä–∞–±–æ—Ç–∫—É HTML –¥–∞–Ω–Ω—ã—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞

